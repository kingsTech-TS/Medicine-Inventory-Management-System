{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/token":{"post":{"summary":"Login","operationId":"login_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"summary":"Read Users Me","operationId":"read_users_me_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPublic"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/profile":{"get":{"summary":"Get My Profile","operationId":"get_my_profile_users_me_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"summary":"Update My Profile","operationId":"update_my_profile_users_me_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/login-details":{"put":{"summary":"Update Login Details","operationId":"update_login_details_users_me_login_details_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/medicines":{"get":{"summary":"Get Medicines","operationId":"get_medicines_medicines_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Medicine"},"type":"array","title":"Response Get Medicines Medicines Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"summary":"Add Medicine","operationId":"add_medicine_medicines_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicineCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Medicine"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/medicines/search":{"get":{"summary":"Search Medicine","operationId":"search_medicine_medicines_search_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/medicines/status":{"get":{"summary":"Get Medicines Status","description":"Returns categorization of medicines logic.\nUser asked for endpoint to measure quantity:\n< 30 -> Low Stock\n< 15 -> Critical","operationId":"get_medicines_status_medicines_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/medicines/export":{"get":{"summary":"Export Medicines","operationId":"export_medicines_medicines_export_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"format","in":"query","required":true,"schema":{"type":"string","title":"Format"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/medicines/{med_id}":{"put":{"summary":"Update Medicine","operationId":"update_medicine_medicines__med_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"med_id","in":"path","required":true,"schema":{"type":"integer","title":"Med Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicineCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Medicine"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Medicine","operationId":"delete_medicine_medicines__med_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"med_id","in":"path","required":true,"schema":{"type":"integer","title":"Med Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/medicines/{med_id}/restock":{"put":{"summary":"Restock Medicine","operationId":"restock_medicine_medicines__med_id__restock_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"med_id","in":"path","required":true,"schema":{"type":"integer","title":"Med Id"}},{"name":"amount","in":"query","required":true,"schema":{"type":"integer","title":"Amount"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/medicines/{med_id}/dispense":{"put":{"summary":"Dispense Medicine","operationId":"dispense_medicine_medicines__med_id__dispense_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"med_id","in":"path","required":true,"schema":{"type":"integer","title":"Med Id"}},{"name":"amount","in":"query","required":true,"schema":{"type":"integer","title":"Amount"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users":{"get":{"summary":"Read Users","operationId":"read_users_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserProfile"},"type":"array","title":"Response Read Users Users Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"summary":"Create User","operationId":"create_user_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/suppliers":{"get":{"summary":"Get Suppliers","operationId":"get_suppliers_suppliers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserPublic"},"type":"array","title":"Response Get Suppliers Suppliers Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{username}":{"get":{"summary":"Read User Detail","operationId":"read_user_detail_users__username__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"summary":"Update Any User","operationId":"update_any_user_users__username__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete User","operationId":"delete_user_users__username__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me/profile-pic":{"post":{"summary":"Upload Profile Pic","operationId":"upload_profile_pic_users_me_profile_pic_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_profile_pic_users_me_profile_pic_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/activities":{"get":{"summary":"Get Activities","description":"Get recent activities (admin only)","operationId":"get_activities_activities_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Activity"},"title":"Response Get Activities Activities Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/alerts":{"get":{"summary":"Get Alerts Enhanced","description":"Get medicines with:\n1. Low Stock or Critical status\n2. Expiry date within 3 months (90 days)","operationId":"get_alerts_enhanced_alerts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Alert"},"type":"array","title":"Response Get Alerts Enhanced Alerts Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/supplier/alerts":{"get":{"summary":"Get Supplier Alerts","description":"Get low stock alerts for medicines relevant to this supplier","operationId":"get_supplier_alerts_supplier_alerts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Alert"},"type":"array","title":"Response Get Supplier Alerts Supplier Alerts Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"Activity":{"properties":{"timestamp":{"type":"string","title":"Timestamp"},"user":{"type":"string","title":"User"},"action":{"type":"string","title":"Action"},"details":{"type":"string","title":"Details"}},"type":"object","required":["timestamp","user","action","details"],"title":"Activity"},"Alert":{"properties":{"medicineId":{"type":"integer","title":"Medicineid"},"medicineName":{"type":"string","title":"Medicinename"},"currentStock":{"type":"integer","title":"Currentstock"},"minStock":{"type":"integer","title":"Minstock"},"status":{"type":"string","title":"Status"},"category":{"type":"string","title":"Category"},"manufacturer":{"type":"string","title":"Manufacturer"},"batchNumber":{"type":"string","title":"Batchnumber"},"expiryDate":{"type":"string","title":"Expirydate"},"price":{"type":"number","title":"Price"},"timestamp":{"type":"string","title":"Timestamp"},"daysRemaining":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Daysremaining"}},"type":"object","required":["medicineId","medicineName","currentStock","minStock","status","category","manufacturer","batchNumber","expiryDate","price","timestamp"],"title":"Alert"},"Body_login_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_token_post"},"Body_upload_profile_pic_users_me_profile_pic_post":{"properties":{"profilePic":{"type":"string","format":"binary","title":"Profilepic"}},"type":"object","required":["profilePic"],"title":"Body_upload_profile_pic_users_me_profile_pic_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Medicine":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"quantity":{"type":"integer","title":"Quantity"},"price":{"type":"number","title":"Price"},"category":{"type":"string","title":"Category"},"manufacturer":{"type":"string","title":"Manufacturer"},"batchNumber":{"type":"string","title":"Batchnumber"},"minStock":{"type":"integer","title":"Minstock"},"expiryDate":{"type":"string","title":"Expirydate"},"status":{"type":"string","title":"Status"},"supplier":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier"}},"type":"object","required":["id","name","quantity","price","category","manufacturer","batchNumber","minStock","expiryDate","status"],"title":"Medicine"},"MedicineCreate":{"properties":{"name":{"type":"string","title":"Name"},"category":{"type":"string","title":"Category"},"manufacturer":{"type":"string","title":"Manufacturer"},"batchNumber":{"type":"string","title":"Batchnumber"},"quantity":{"type":"integer","title":"Quantity"},"expiryDate":{"type":"string","title":"Expirydate"},"price":{"type":"number","title":"Price"},"minStock":{"type":"integer","title":"Minstock"},"supplier":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier"}},"type":"object","required":["name","category","manufacturer","batchNumber","quantity","expiryDate","price","minStock"],"title":"MedicineCreate"},"User":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"},"role":{"type":"string","title":"Role"},"firstName":{"type":"string","title":"Firstname","default":""},"lastName":{"type":"string","title":"Lastname","default":""},"gender":{"type":"string","title":"Gender","default":""},"phoneNumber":{"type":"string","title":"Phonenumber","default":""},"profilePic":{"type":"string","title":"Profilepic","default":""},"address":{"type":"string","title":"Address","default":""}},"type":"object","required":["username","email","password","role"],"title":"User"},"UserLoginUpdate":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"newPassword":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Newpassword"},"currentPassword":{"type":"string","title":"Currentpassword"}},"type":"object","required":["currentPassword"],"title":"UserLoginUpdate"},"UserProfile":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"role":{"type":"string","title":"Role"},"firstName":{"type":"string","title":"Firstname"},"lastName":{"type":"string","title":"Lastname"},"gender":{"type":"string","title":"Gender"},"phoneNumber":{"type":"string","title":"Phonenumber"},"profilePic":{"type":"string","title":"Profilepic"},"address":{"type":"string","title":"Address"}},"type":"object","required":["username","email","role","firstName","lastName","gender","phoneNumber","profilePic","address"],"title":"UserProfile"},"UserProfileUpdate":{"properties":{"firstName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Firstname"},"lastName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lastname"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"phoneNumber":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phonenumber"},"profilePic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Profilepic"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","title":"UserProfileUpdate"},"UserPublic":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"role":{"type":"string","title":"Role"},"firstName":{"type":"string","title":"Firstname","default":""},"lastName":{"type":"string","title":"Lastname","default":""}},"type":"object","required":["username","email","role"],"title":"UserPublic"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}